#connect/disconnect
#if you use usb cable, you do not need connect to devices
adb tcpip 5555
adb connect [ip]
adb disconnect [ip]

#show all devices
adb devices

#sceenshots
flick screenshot -p android -n test

#video
flick video -a start -p android  => flick video -a stop -p android -n <video name>

#all packages
adb shell pm list packages -f [-s]

#Push to device:
adb push /path/to/local/file /mnt/sdcard/path/to/file

#open settings
adb shell am start -a android.settings.AIRPLANE_MODE_SETTINGS

#open app
adb shell am start -n <app bundle_id>/<app activity_name>

#install application
adb install <app path>

#update application
adb install -r <app path>

#close app
adb shell am force-stop com.android.vending

#delete app
adb uninstall <app bundle_id>

#Save log
adb logcat -d > <log name>  =>  adb logcat -c
flick log -a start -p android -n <log name>  =>  flick log -a stop -p android

#Check lock/display:
adb shell dumpsys power | grep 'mHolding'

#Check permissions
aapt d permissions <app path>

#Show manifest
aapt l -a <app path>

#Show app bundleId
aapt dump badging <app path> | grep -o "package: name='[^']*" | awk -F "='" '{print $2}'

#Show app activity
aapt dump badging <app path> | grep -o "launchable-activity: name='[^']*" | awk -F "='" '{print $2}'

#UnLock device
adb shell input keyevent KEYCODE_POWER
sleep 1
if [[ `adb shell dumpsys power | grep 'mHoldingDisplaySuspendBlocker=true'` == "" ]]; then
	adb shell input keyevent KEYCODE_POWER
fi
adb shell input text <password>
adb shell input keyevent KEYCODE_ENTER

#Create object [aapt]
AAPT=`ls $ANDROID_HOME/build-tools/*/aapt | tail -n1`

#Show app build version
adb shell dumpsys package <app bundle_id> | grep versionCode

#Show android properties list
adb shell getprop

#Show json info about app in play store
https://androidquery.appspot.com/api/market?app=<app_package>

#Download app from play store
gplaycli -d <app_package> -f <folder_path>
gp-download <app_package> > <apk_name>

#Get gplay app version
gp-bulk-details <app_package> | jq -r ".[0] .details.appDetails.versionString"
gp-bulk-details <app_package> | jq -r ".[0] .details.appDetails.versionCode"

#Get time in ms («*1000» for unixtime type)
adb shell date +%s

#Get android_id
adb shell settings get secure android_id

#Android Inspector
uiautomator

#Go to homepage
adb shell am start -a android.intent.action.MAIN -c android.intent.category.HOME

# Clear data
adb shell pm clear <package name>

# Set permission
adb shell pm grant my.awesome.package.name android.permission.PERMISSION_THAT_YOU_NEED

# Unzip apk
apktool d <apk_name>

# Grand all apk permissions to device
aapt d permissions <apk_path> \
  | sed -n \
    -e "s/'//g" \
    -e "/^uses-permission: name=android.permission\./s/^[^=]*=//p" \
  | xargs -n 1 adb shell pm grant <app_package>

# Get android version
adb shell getprop ro.build.version.release

# Get curren wifi
adb shell dumpsys netstats | grep 'networkId' | grep -v 'uid=-1'

# Turned on/off wifi
adb shell am start -a android.intent.action.MAIN -n com.android.settings/.wifi.WifiSettings
adb shell input keyevent 19 & adb shell input keyevent 19 & adb shell input keyevent 23
adb shell input keyevent 19 & adb shell input keyevent 19 & adb shell input keyevent 23

# Tap
adb shell input tap X Y

# Send referrer
bundleId=`aapt dump badging <apk_path> | grep -o "package: name='[^']*" | awk -F "='" '{print $2}'`
adb shell am broadcast -a com.android.vending.INSTALL_REFERRER  -n  <bundle_id>/<app_receiver> --es referrer WTxqp%3DACaLv%26mt_deeplink%3DHsBVy%3A%2F%2FKYZOE.pvgrN

# Download apk from device
apk=`adb shell pm path <your_bundle>`; apk=`echo $apk | awk '{print $NF}' FS=':' | tr -d '\r\n'`; adb pull $apk <path/to/save>

# Grep errors
adb logcat *:E